![figure](logo/scretrieval.png)

## Benchmarking Traditional Methods and Foundation Models for Single-cell Transcriptomics Data Search and Retrieval
## ğŸ“ Directory Structure

```
.
â”œâ”€â”€ data                    # Data files 
â”œâ”€â”€ downstream_analysis     # Scripts for downstream tasks analysis
â”œâ”€â”€ environments            # Reproducible Python or Julia environments  
â”œâ”€â”€ logo                    
â”œâ”€â”€ model_inference         # Models and their inference scripts included in the benchmark
â”œâ”€â”€ quantitative_metrics    # Scripts for evaluating models' retrieval performance
â”œâ”€â”€ retrieval               # Main scripts for retrieval
â”œâ”€â”€ scripts                 # Bash scripts for running retrieval experiments and evaluations
â”œâ”€â”€ LICENSE  
â””â”€â”€ README.md  
```

---

## âš™ï¸ Installation

### 1. Clone the Repository

```bash
git clone https://github.com/fym0503/SCRetrieval.git
cd SCRetrieval
```

### 2. Set Up for Each Method

Python and Julia versions, along with required packages for each method, are summarized in the **`environments/`** directory.  
Use the provided installation scripts to set up corresponding environments.

| Installation Script       | Python/Julia Version | Methods Supported                              |
|---------------------------|----------------------|------------------------------------------------|
| `env1_installation.sh`    | Python 3.8           | UCE, Scimilarity                               |
| `env2_installation.sh`    | Python 3.11          | Geneformer, scFoundation, scVI, PCA, LDVAE     |
| `env3_installation.sh`    | Python 3.10          | scGPT                                          |
| `env4_installation.sh`    | Python 3.10          | scMulan                                        |
| `env5_installation.sh`    | Python 3.9           | cellPLM                                        |
| `env6_installation.sh`    | Python 3.9           | CellBlast                                      |
| `env7_installation.sh`    | Julia 1.6.7          | CellFishing                                    |

To install the required environment for a specific setup, run:

```bash
bash environments/env1_installation.sh
```

---

## ğŸš€ Quick Start

### ğŸ”¹ Data Preprocessing

All datasets and embeddings generated by each method can be downloaded following the instructions in the **`data/`** directory.  

### ğŸ”¹ Run a Model Inference Example (Geneformer)

```bash
cd model_inference/geneformer
bash run_model.sh
```

### ğŸ”¹ Run a Model Inference by Julia Example (cellfishing.jl)

It is recommended to download the zip installation file to install Julia with version 1.6.7. 

```bash
cd model_inference/cellfishing
julia run_cellfishing.jl
```

### ğŸ”¹ Run Retrieval Example (PBMC-Ding)

Change the input paths of generated embeddings and raw h5ad files if necessary.

```bash
cd scripts
bash PBMC-Ding_retrieval.sh
```

### ğŸ”¹ Run Retrieval Performance Accuracy Example (PBMC-Ding)

```bash
cd scripts
bash run_metric.sh
```
---

## ğŸ§¬ Datasets

Currently included datasets:

```
â”œâ”€ PBMC-Ding
â”œâ”€ Pancreas
â”œâ”€ Cerebellum-dev
â”œâ”€ Muscle-aging
â”œâ”€ Tabula
â”œâ”€ Arterial-Aortia
â”œâ”€ Arterial-RCA
â”œâ”€ Limb-Embryo
â”œâ”€ Ionocyte
â””â”€ COVID
```

Noted that, for cross-species datasets, mouse-to-human gene mapping data are provided.
---

## ğŸ§  Algorithms

> Current included algorithms:

### âœ³ï¸ Traditional Methods (TMs)

- CellFishing.jl
- PCA
- scVI
- CellBlast
- LDVAE

### ğŸ§© Foundation Models (FMs)

- Geneformer  
- scFoundation  
- scGPT  
- UCE  
- SCimilarity
- scMuLan
- CellPLM

---

## ğŸ“Š Downstream Evaluation

For downstream evaluation details, refer to `downstream_analysis/README.md`.

**Currently included downstream tasks:**

---

## ğŸ“œ License
This project is licensed under the terms of the LICENSE file included in the repository.

---

## ğŸ‘©â€ğŸ’» Authors & Acknowledgements

For issues or questions, please open an issue on the [GitHub repository](https://github.com/fym0503/SCRetrieval.git).

---

Â© 2025 SCRetrieval. All rights reserved.
